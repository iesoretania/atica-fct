{% trans_default_domain 'calendar' %}
{% extends 'layout.html.twig' %}
{% import '::macros.html.twig' as m %}
{% block content %}
    <h2>{{ 'browse.title'|trans }}</h2>

    {% include 'calendar/agreement_calendar_stats_partial.html.twig' %}

    <form method="post" action="{{ path('agreement_calendar_operation', {'id': agreement.id}) }}">
        {% if calendar is not empty %}
            {% set buttons = true %}
            {% include 'calendar/agreement_calendar_graphic_partial.html.twig' %}
        {% endif %}
        {{ m.link_button(path('admin_agreement_form', {'id': agreement.id}), 'arrow-left', 'btn-default', 'form.back'|trans) }}
        {{ m.link_button(path('agreement_calendar_add', {'id': agreement.id}), 'calendar-plus-o', 'btn-success', 'form.add'|trans) }}
        {% if calendar is not empty %}
            {{ m.submit_button('delete', 'trash', 'btn-danger', 'form.delete'|trans) }}
            {{ m.submit_button('lock', 'lock', 'btn-default', 'form.lock_action'|trans) }}
            {{ m.submit_button('unlock', 'unlock', 'btn-default', 'form.unlock_action'|trans) }}
            {{ m.link_button('', 'check-square', 'btn-default', 'form.select_deselect'|trans, 'toggle') }}
            <p></p>
            <div class="alert alert-warning">{{ 'prompt.session_deletion_warning'|trans|nl2br }}</div>
        {% endif %}
    </form>
{% endblock %}

{% block javascripts %}
    <script>
        $('a#toggle').click(function() {
            $("input.remove").each( function() {
                this.checked = !(this.checked);
            });
            return false;
        });
    </script>
{% endblock %}
